import{jsx as e,jsxs as t,Fragment as n}from"react/jsx-runtime";import r,{useState as o,useEffect as l,forwardRef as i,useRef as a,useCallback as c,useMemo as u,useLayoutEffect as d}from"react";import{useQuery as s}from"@tanstack/react-query";import f from"axios";var p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)};function h(e,t,n,r){return new(n||(n=Promise))(function(o,l){function i(e){try{c(r.next(e))}catch(e){l(e)}}function a(e){try{c(r.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,a)}c((r=r.apply(e,t||[])).next())})}function v(e,t){var n,r,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(l=0)),l;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,r=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(o=l.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){l.label=a[1];break}if(6===a[0]&&l.label<o[1]){l.label=o[1],o=a;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(a);break}o[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function m(e,t,n){if(n||2===arguments.length)for(var r,o=0,l=t.length;o<l;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function g(e){void 0===e&&(e=768);var t=o("undefined"!=typeof window&&window.innerWidth<e),n=t[0],r=t[1];return l(function(){function t(){r(window.innerWidth<e)}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}},[e]),n}"function"==typeof SuppressedError&&SuppressedError;var b=function(t){return t.columns,t.isLoading,t.pageSize,t.rows,t.theme,t.textsConfig,e("div",{children:"MobileTable"})},y=function(t){var n=t.className,r=t.style;return e("svg",{style:void 0===r?{}:r,stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",className:n,height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M3 19h18a1.002 1.002 0 0 0 .823-1.569l-9-13c-.373-.539-1.271-.539-1.645 0l-9 13A.999.999 0 0 0 3 19z"})})},w=function(t){var n=t.onClick,r=t.className,o=t.style;return e("svg",{style:void 0===o?{}:o,onClick:n,className:r,stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",height:"1rem",width:"1rem",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M6.2253 4.81108C5.83477 4.42056 5.20161 4.42056 4.81108 4.81108C4.42056 5.20161 4.42056 5.83477 4.81108 6.2253L10.5858 12L4.81114 17.7747C4.42062 18.1652 4.42062 18.7984 4.81114 19.1889C5.20167 19.5794 5.83483 19.5794 6.22535 19.1889L12 13.4142L17.7747 19.1889C18.1652 19.5794 18.7984 19.5794 19.1889 19.1889C19.5794 18.7984 19.5794 18.1652 19.1889 17.7747L13.4142 12L19.189 6.2253C19.5795 5.83477 19.5795 5.20161 19.189 4.81108C18.7985 4.42056 18.1653 4.42056 17.7748 4.81108L12 10.5858L6.2253 4.81108Z",fill:"currentColor"})})},x=function(t){var n=t.className,r=t.style;return e("svg",{style:void 0===r?{}:r,stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",height:"1rem",width:"1rem",className:n,xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.319 14.4326C20.7628 11.2941 20.542 6.75347 17.6569 3.86829C14.5327 0.744098 9.46734 0.744098 6.34315 3.86829C3.21895 6.99249 3.21895 12.0578 6.34315 15.182C9.22833 18.0672 13.769 18.2879 16.9075 15.8442C16.921 15.8595 16.9351 15.8745 16.9497 15.8891L21.1924 20.1317C21.5829 20.5223 22.2161 20.5223 22.6066 20.1317C22.9971 19.7412 22.9971 19.1081 22.6066 18.7175L18.364 14.4749C18.3493 14.4603 18.3343 14.4462 18.319 14.4326ZM16.2426 5.28251C18.5858 7.62565 18.5858 11.4246 16.2426 13.7678C13.8995 16.1109 10.1005 16.1109 7.75736 13.7678C5.41421 11.4246 5.41421 7.62565 7.75736 5.28251C10.1005 2.93936 13.8995 2.93936 16.2426 5.28251Z",fill:"currentColor"})})},C=i(function(n,r){var o=n.label,l=n.checked,i=n.onChange,a=n.name,c=n.className,u=n.value,d=n.disabled,s=void 0!==d&&d,f=n.defaultChecked,p=n.primaryColor;return t("label",{className:"".concat(c," checkbox"),children:[e("input",{className:"checkbox-input",type:"checkbox",name:a,checked:l,onChange:i,ref:r,value:u,disabled:s,defaultChecked:f}),e("span",{style:{backgroundColor:l?p:"transparent",borderColor:l?p:"#b8b8b8"},className:"checkbox-control w-[22px] h-[22px] min-w-[22px] min-h-[22px] rounded-md border transition-all\n    "}),o&&e("span",{className:"checkbox-label",children:o})]})});C.displayName="Checkbox";var S=function(n){var r=n.columns,l=n.isLoading,i=n.maxHeight,c=n.pageSize,u=n.rows,d=n.theme,s=n.textsConfig,f=n.onAllSelect,p=n.onOrderChange,h=n.rowHeight,v=a(null),m=a(null),g=o(null),b=g[0],w=g[1];return e("div",{className:"w-full overflow-hidden rounded-xl",style:{border:"1px solid ".concat(d.borderColor)},children:t("div",{className:"relative",children:[e("div",{ref:v,className:"overflow-x-auto overflow-y-hidden scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:e("table",{className:"w-full table-fixed border-collapse",children:e("thead",{style:{backgroundColor:d.headerBg},children:e("tr",{style:{height:h},children:r.map(function(n,r){return e("th",{style:{width:null==n?void 0:n.width,color:d.headerText,borderBottom:"1px solid ".concat(d.rowBorder)},className:"".concat((null==n?void 0:n.orderable)?"cursor-pointer":""," py-2 px-1 text-center min-w-max text-xs"),onClick:function(){return(null==n?void 0:n.orderable)&&function(e,t){t.orderable&&t.data&&w(function(n){var r;return r=n&&n.column===e?"desc"===n.dir?{column:e,dir:"asc",name:t.data}:null:{column:e,dir:"desc",name:t.data},null==p||p(r),r})}(r,n)},children:"selectableTable"===(null==n?void 0:n.data)?e(C,{className:"mx-auto justify-center",primaryColor:d.primaryColor,onChange:function(){return null==f?void 0:f()}}):t("div",{className:"truncate mx-auto m-auto text-center line-clamp-1 flex items-center justify-center gap-1",title:(null==n?void 0:n.width)?null==n?void 0:n.title:"",children:[(null==n?void 0:n.orderable)&&t("span",{className:"flex flex-col items-center",children:[e(y,{style:{color:"asc"===(null==b?void 0:b.dir)?null==d?void 0:d.headerText:""},className:"h-2 translate-y-[1px] ".concat((null==b?void 0:b.column)===r&&"asc"===(null==b?void 0:b.dir)?"opacity-100":"opacity-20")}),e(y,{style:{color:"desc"===(null==b?void 0:b.dir)?null==d?void 0:d.headerText:""},className:"h-2 rotate-180 ".concat((null==b?void 0:b.column)===r&&"desc"===(null==b?void 0:b.dir)?"opacity-100":"opacity-20")})]}),null==n?void 0:n.title]})},(null==n?void 0:n.data)||r)})})})})}),e("div",{ref:m,className:"overflow-auto w-full",style:{maxHeight:i},children:e("table",{className:"w-full table-fixed border-collapse",children:e("tbody",{children:l?Array.from({length:c}).map(function(t,n){return e("tr",{children:r.map(function(t,n){return e("td",{children:e("div",{className:"h-9 w-full animate-pulse",style:{backgroundColor:d.rowBg}})},n)})},n)}):(null==u?void 0:u.length)>0?u.map(function(t,n){return e("tr",{style:{borderBottom:"1px solid ".concat(d.rowBorder),backgroundColor:d.rowBg,height:h},children:r.map(function(r,o){var l,i=r.data,a=(null==r?void 0:r.render)?null==r?void 0:r.render(i?t[i]:void 0,t,n):i?t[i]:null;return e("td",{style:{width:null==r?void 0:r.width,color:d.cellText},className:"py-1 px-1 text-center",children:e("div",{title:i?null===(l=t[i])||void 0===l?void 0:l.toString():void 0,className:"block truncate mx-auto text-center ".concat(null===i?"flex items-center justify-center gap-1.5":"mx-auto"," h-auto text-sm"),children:a})},o)})},n)}):e("tr",{children:e("td",{colSpan:r.length,className:"p-6 text-center",style:{color:d.headerText},children:s.noDataText})})})})})]})})},N=function(e){return function(t,n,r){return e(t,n,r)}},P=function(e){if(null==e||""===e)return"";var t="number"==typeof e?e:parseFloat(e.toString().replace(/,/g,""));return isNaN(t)?"":t.toLocaleString("en-US")},O={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},k=r.createContext&&r.createContext(O),B=["attr","size","title"];function z(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach(function(t){T(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function T(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return e&&e.map((e,t)=>r.createElement(e.tag,A({key:t},e.attr),E(e.child)))}function I(e){return t=>r.createElement(R,j({attr:A({},e.attr)},t),E(e.child))}function R(e){var t=t=>{var n,{attr:o,size:l,title:i}=e,a=z(e,B),c=l||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",j({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,a,{className:n,style:A(A({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==k?r.createElement(k.Consumer,null,e=>t(e)):t(O)}function M(e){return I({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z",opacity:".87"},child:[]},{tag:"path",attr:{d:"M17.51 3.87 15.73 2.1 5.84 12l9.9 9.9 1.77-1.77L9.38 12l8.13-8.13z"},child:[]}]})(e)}function F(e){return I({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"},child:[]}]})(e)}function H(){var e=o(function(){return window.location.search}),t=e[0],n=e[1];return l(function(){var e=function(){n(window.location.search)};return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}},[]),{getParams:c(function(e){return new URLSearchParams(t).get(e)},[t]),updateParams:c(function(e,t){var r=new URLSearchParams(window.location.search);r.set(e,t);var o=r.toString(),l=o?"".concat(window.location.pathname,"?").concat(o):window.location.pathname;window.history.pushState({},"",l),n(window.location.search)},[]),removeParams:c(function(e){var t=new URLSearchParams(window.location.search);t.delete(e);var r=t.toString(),o=r?"".concat(window.location.pathname,"?").concat(r):window.location.pathname;window.history.pushState({},"",o),n(window.location.search)},[])}}var D=function(r){var i=r.totalItems,a=r.pageSize,d=r.queryName,s=void 0===d?"page":d,f=r.startMobileSize,h=r.theme,v=r.dir,m=r.textsConfig,b=r.onChangePage,y=H(),w=y.updateParams,x=y.getParams,C=Number(x(s))||1,S=Math.ceil(i/a),N=g(f),O=o(C.toString()),k=O[0],B=O[1],z=S.toString().length,j={color:h.paginationTextColor,border:"1px solid ".concat(h.paginationBorderColor),backgroundColor:h.paginationBg||"transparent",padding:"0 8px",borderRadius:"6px",fontSize:"14px",minWidth:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},L={backgroundColor:h.paginationActiveColor,border:"1px solid ".concat(h.paginationActiveColor),color:h.paginationTextColor},A={backgroundColor:h.paginationDisabledBackgroundColor,cursor:"not-allowed",opacity:.6},T=u(function(){var e=C-1,t=C+1;return C<3?(e=2,t=4):C>S-2?(e=S-3,t=S-1):(e=C-1,t=C+1),e<2&&(e=2),t>S-1&&(t=S-1),e>t?[]:Array.from({length:t-e+1},function(t,n){return e+n})},[C,S]),E=T.length>0&&T[0]>2,I=T.length>0&&T[T.length-1]<S-1,R=c(function(e){w(s,e.toString()),null==b||b(e)},[w,s]),D=function(){return C<S&&R(C+1)},W=function(){return C>1&&R(C-1)};l(function(){B(C.toString())},[C]);var q=function(){if(k){var e=parseInt(k,10);(isNaN(e)||e<1)&&(e=1),e>S&&(e=S),e!==C?R(e):B(C.toString())}else B(C.toString())};l(function(){if(k!==C.toString()&&""!==k){var e=setTimeout(function(){q()},2e3);return function(){return clearTimeout(e)}}},[k,C]);return S<=1?null:N?t(n,{children:[e("button",{style:p(p({},j),1===C?A:{}),disabled:1===C,onClick:W,children:e("rtl"===v?F:M,{style:{fontSize:"16px"}})}),e("input",{style:{width:"40px",textAlign:"center",border:"1px solid ".concat(h.paginationBorderColor),borderRadius:"6px"},type:"number",inputMode:"numeric",value:k,onChange:function(e){var t=e.target.value.replace(/\D/g,"");t.length<=z&&B(t)},onKeyDown:function(e){"Enter"===e.key&&q()},onBlur:function(){q()}}),e("span",{style:{color:h.paginationTextColor},children:"/"}),e("span",{children:S}),e("button",{style:p(p({},j),C===S?A:{}),disabled:C===S,onClick:D,children:e("rtl"===v?M:F,{style:{fontSize:"16px"}})})]}):t("div",{id:"paging",className:"w-full flex items-center justify-between gap-2 md:!mt-2 flex-wrap-reverse",children:[e("nav",{children:t("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[e("button",{style:p(p({},j),1===C?A:{}),disabled:1===C,onClick:function(){return R(1)},className:"first-paging",children:null==m?void 0:m.firstPaging}),e("button",{style:p(p({},j),1===C?A:{}),disabled:1===C,onClick:W,className:"next-paging",children:e("rtl"===v?F:M,{style:{fontSize:"16px"}})}),e("button",{style:p(p({},j),1===C?L:{}),onClick:function(){return R(1)},className:"paging-button",children:1}),E&&e("span",{style:j,children:"..."}),T.map(function(t){return e("button",{style:p(p({},j),t===C?L:{}),onClick:function(){return R(t)},className:"paging-button",children:P(t)||""},t)}),I&&e("span",{style:j,children:"..."}),e("button",{style:p(p({},j),S===C?L:{}),onClick:function(){return R(S)},className:"paging-button",children:P(S)||""}),e("button",{style:p(p({},j),C===S?A:{}),disabled:C===S,onClick:D,className:"prev-paging",children:e("rtl"===v?M:F,{style:{fontSize:"16px"}})}),e("button",{style:p(p({},j),C===S?A:{}),disabled:C===S,onClick:function(){return R(S)},className:"last-paging",children:null==m?void 0:m.lastPaging})]})}),i>0&&!N&&e("p",{children:null==m?void 0:m.showing((Number(C)-1)*a+1,Math.min(Number(C)*a,i),P(i))})]})},W=function(t){var n=t.row,r=t.selectableProps,o=t.theme,l=r.selectedKey,i=r.selectedIds||[],a=n[l],u=c(function(e){if(r){var t=r.selectedIds,n=r.selectedKey,o=r.onSelectChange,l=null==e?void 0:e[n];if(l){var i=(null==t?void 0:t.includes(l))?t.filter(function(e){return e!==l}):m(m([],t||[],!0),[l],!1);null==o||o(i)}}},[r]);return e(C,{className:"mx-auto justify-center",primaryColor:o.primaryColor,checked:i.includes(a),value:a,onChange:function(){return u(n)}})};function q(e){return I({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"},child:[]}]})(e)}var K=function(n){var r=n.pageSize,l=n.onPageSizeChange,i=n.initialPageSize,a=n.theme,c=o(r),u=c[0],d=c[1],s=H(),f=s.updateParams,p=s.removeParams;return t("div",{className:"relative flex items-center gap-1",children:[e("span",{className:"md:text-base text-xs",children:"نمایش"}),t("select",{value:u,onChange:function(e){var t=Number(e.target.value);d(t),p("page"),f("pageSize",null==t?void 0:t.toString()),l(t)},style:{borderColor:null==a?void 0:a.searchBoxBorderColor},className:"my-0 flex items-center justify-between  gap-3 text-right text-base bg-white rounded-lg placeholder:text-sm !outline-none w-full p-2 border focus:border-primary disabled:opacity-70 appearance-none pl-6 cursor-pointer max-md:py-1 max-md:h-8 max-md:min-w-12 max-md:text-sm",children:[e("option",{value:i,children:i}),e("option",{value:20,children:"20"}),e("option",{value:50,children:"50"}),e("option",{value:100,children:"100"}),e("option",{value:200,children:"200"}),e("option",{value:300,children:"300"})]}),e(q,{className:"absolute left-2 top-1/2 -translate-y-1/2 pointer-events-none text-gray-500"})]})},U={en:{row:"Row",noDataText:"No data available",firstPaging:"First",lastPaging:"Last",showing:function(e,t,n){return"Showing ".concat(e," to ").concat(t," of ").concat(n," records")},searchPlaceholder:"search ..."},fa:{row:"ردیف",noDataText:"اطلاعاتی برای نمایش وجود ندارد",firstPaging:"اولین",lastPaging:"آخرین",showing:function(e,t,n){return"نمایش ".concat(e," تا ").concat(t," از ").concat(n," رکورد")},searchPlaceholder:"جستجو کنید..."}},Z=r.memo(function(r){var i,a,y,C,P,O=r.startMobileSize,k=r.columns,B=void 0===k?[]:k,z=r.isSelectable,j=r.colorTheme,L=r.textsConfig,A=r.lang,T=void 0===A?"en":A,E=r.pageQueryName,I=void 0===E?"page":E,R=r.pageSize,M=void 0===R?10:R,F=r.mode,q=r.hasColumnOrder,Z=r.noSearch,J=r.saveSearch,V=r.notify,_=r.onPageChange,G=r.onSortChange,Q=r.onSearch,X=r.isLoading,Y=r.autoPageSizeConfig,$=r.height,ee=r.onPageSizeChange,te=z?r:void 0,ne=u(function(){return p({borderColor:"#e7e7e7",headerBg:"#f9f9f9",headerText:"#333333",rowBorder:"#e7e7e7",rowBg:"#fff",cellText:"#7a7a7a",primaryColor:"#ffd61f",paginationBg:"#fff",paginationBorderColor:"#d9d9d9",paginationActiveColor:"#ffd61f",paginationTextColor:"#333333",paginationDisabledBackgroundColor:"#f9f9f9",searchBoxBorderColor:"#d9d9d9",errorColor:"#f43f5e"},j)},[j]),re=u(function(){return p(p({},U[T]),L)},[T,L]),oe="fa"===T?"rtl":"ltr",le=p(p(p({},{enabled:!0,containerSelector:"#content-wrapper",subtractSelectors:["#filters","#topFilter","#tabPage","#userCards","#title"],optionalSelectorsForExtraBuffer:["#tabPage","#topFilter","#userCards","#title"],rowHeight:51.15,baseBufferRows:2,extraBufferRows:1}),Y),{subtractSelectors:m(["#paging"],(null==Y?void 0:Y.subtractSelectors)||[],!0)}),ie=le.enabled,ae=le.containerSelector,ce=le.subtractSelectors,ue=le.optionalSelectorsForExtraBuffer,de=le.rowHeight,se=le.baseBufferRows,fe=le.extraBufferRows,pe=g(O),he=H(),ve=he.updateParams,me=he.getParams,ge=he.removeParams,be=o(function(){return Number(me(I))||1}),ye=be[0],we=be[1],xe=o("static"===F&&r.staticRows||[]),Ce=xe[0],Se=xe[1],Ne=o("static"===F&&r.totalItems||0),Pe=Ne[0],Oe=Ne[1],ke=Number(me("pageSize"))||M,Be=o(pe?ke:ie?0:ke),ze=Be[0],je=Be[1],Le=o(pe?ke:0),Ae=Le[0],Te=Le[1],Ee=o([{column:q?8:0,dir:"internal"===F?null===(i=null==r?void 0:r.internalApiConfig)||void 0===i?void 0:i.sortType:"desc",name:"internal"===F?null===(a=null==r?void 0:r.internalApiConfig)||void 0===a?void 0:a.defaultSortBy:"id"}]),Ie=Ee[0],Re=Ee[1],Me=o(""),Fe=Me[0],He=Me[1],De=o(Fe),We=De[0],qe=De[1],Ke=c(function(e){Re(e?[e]:[]),null==G||G(e)},[F,G]),Ue=u(function(){var e=(ye-1)*ze,t=e+ze;return Ce.slice(e,t)},[Ce,ye,ze]),Ze=u(function(){return m(m(m([],z?[{data:"selectableTable",title:"",render:N(function(t,n){return te?e(W,{row:n,selectableProps:te,theme:ne}):null}),orderable:!1,width:50,searchable:!1}]:[],!0),[{data:"id",title:re.row,render:N(function(e,t,n){return(Number(ye)-1)*ze+(n+1)}),orderable:!0,width:70,searchable:!1,dontShowTitleInMobile:!0}],!1),B,!0)},[B,z,te,ne,re.row,ye]);if(l(function(){var e=function(){we(Number(me(I))||1)};return window.addEventListener("popstate",e),function(){return window.removeEventListener("popstate",e)}},[me,I]),l(function(){"static"===F&&(Se(r.staticRows||[]),Oe(r.totalItems||0))},[r.staticRows,r.totalItems]),d(function(){if(!pe&&ie){var e=function(){for(var e,t,n=0,r=0,o=ce||[];r<o.length;r++){var l=o[r];n+=Number((null===(e=document.querySelector(l))||void 0===e?void 0:e.clientHeight)||0)}var i=Number((null===(t=document.querySelector(ae||""))||void 0===t?void 0:t.clientHeight)||0)-n,a=Math.floor(i/(de||51.15)),c=se||2,u=(ue||[]).some(function(e){var t;return Number((null===(t=document.querySelector(e))||void 0===t?void 0:t.clientHeight)||0)>0});u&&(c+=fe||1);var d=a-c;d>0&&(Te(d),ze||je(Number(me("pageSize"))||d))};e();var t=new MutationObserver(e);return t.observe(document.body,{childList:!0,subtree:!0}),function(){return t.disconnect()}}},[pe,ie]),l(function(){var e=setTimeout(function(){qe(Fe),null==Q||Q(Fe)},400);return function(){return clearTimeout(e)}},[Fe]),l(function(){var e;if("internal"===F&&J&&(null===(e=r.internalApiConfig)||void 0===e?void 0:e.tableName)){var t="search_".concat(r.internalApiConfig.tableName),n=sessionStorage.getItem(t);if(n){var o=JSON.parse(n).value;He(o),qe(o)}}},[F,J,r]),l(function(){var e,t;if("internal"===F&&J&&(null===(e=null==r?void 0:r.internalApiConfig)||void 0===e?void 0:e.tableName)){var n="search_".concat(null===(t=null==r?void 0:r.internalApiConfig)||void 0===t?void 0:t.tableName);sessionStorage.setItem(n,JSON.stringify({value:Fe}))}},[Fe,J,null==r?void 0:r.mode]),l(function(){if("static"===F&&(null==Ie?void 0:Ie.length)>0){var e=Ie[0],t=e.name,n=e.dir;if(!t)return;var o=m([],r.staticRows,!0).sort(function(e,r){var o=e[t],l=r[t];return null==o?1:null==l?-1:"number"==typeof o&&"number"==typeof l?"asc"===n?o-l:l-o:"asc"===n?String(o).localeCompare(String(l)):String(l).localeCompare(String(o))});Se(o)}},[Ie,F,r]),l(function(){"external"===F&&(Se(r.externalRows||[]),Oe(r.totalItems||0))},[F,r.externalRows,r.totalItems]),"internal"===F){var Je=Array.isArray(null===(y=null==r?void 0:r.internalApiConfig)||void 0===y?void 0:y.customBody)?null===(C=null==r?void 0:r.internalApiConfig)||void 0===C?void 0:C.customBody.filter(function(e){return!e.noRefresh}):[];s({enabled:Boolean(ze&&"internal"===F),queryKey:[null===(P=null==r?void 0:r.internalApiConfig)||void 0===P?void 0:P.tableName,ye,We,Ie,ze,Je],refetchOnWindowFocus:!1,refetchIntervalInBackground:!1,queryFn:function(){return h(void 0,void 0,void 0,function(){var e,t,n,o,l,i,a,c,u,d,s,p,h,m,g,b;return v(this,function(v){switch(v.label){case 0:return v.trys.push([0,2,,3]),e=(null===(a=null==r?void 0:r.internalApiConfig)||void 0===a?void 0:a.customBody)||[],t=null===(c=null==Ze?void 0:Ze.filter(function(e){return null!==e.data}))||void 0===c?void 0:c.map(function(e){return{data:null==e?void 0:e.data,name:null==e?void 0:e.data,searchable:null==e?void 0:e.searchable,orderable:null==e?void 0:e.orderable,search:{value:"",regex:!1,fixed:[]}}}),n={draw:ye,columns:t,order:Ie||[],start:(ye-1)*ze,length:ze,search:{value:We||"",regex:!1,fixed:[]}},e.forEach(function(e){e.noRefresh,e.isFilter;var t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["noRefresh","isFilter"]);Object.assign(n,t)}),o=(null===(u=null==r?void 0:r.internalApiConfig)||void 0===u?void 0:u.endpoint)||"",[4,f({method:(null===(d=null==r?void 0:r.internalApiConfig)||void 0===d?void 0:d.method)||"POST",url:(null===(s=null==r?void 0:r.internalApiConfig)||void 0===s?void 0:s.baseUrl)+o||""+o,data:n||null,headers:null===(p=null==r?void 0:r.internalApiConfig)||void 0===p?void 0:p.headers})];case 1:return l=v.sent(),null===(m=null===(h=null==r?void 0:r.internalApiConfig)||void 0===h?void 0:h.onFetch)||void 0===m||m.call(h,null==l?void 0:l.data),Se(null===(g=null==l?void 0:l.data)||void 0===g?void 0:g.data),Oe(null===(b=null==l?void 0:l.data)||void 0===b?void 0:b.recordsFiltered),[2,null==l?void 0:l.data];case 2:return i=v.sent(),V(null==i?void 0:i.message,"error"),[3,3];case 3:return[2]}})})}}).isFetching}return t("div",{dir:oe,children:[t("div",{id:"table-header-actions",className:"mb-2 flex md:items-start items-center md:gap-2 gap-3 w-fit md:flex-wrap-reverse max-md:w-full",children:[!Z&&e("div",{className:"max-md:w-full",children:e("div",{className:"flex flex-col gap-1 md:!w-[320px] [&>div]:!gap-1 [&>div]:!flex-row-reverse",children:t("div",{style:{borderColor:null==ne?void 0:ne.searchBoxBorderColor},className:"my-0 flex items-center justify-between  gap-3 text-right text-base bg-white rounded-lg placeholder:text-sm !outline-none w-full p-2 border focus:border-primary disabled:opacity-70",children:[Fe?e(w,{style:{borderColor:null==ne?void 0:ne.searchBoxBorderColor,color:Fe?null==ne?void 0:ne.errorColor:null==ne?void 0:ne.searchBoxBorderColor},onClick:function(){return He("")},className:"size-6 font-bold scale-125 cursor-pointer ".concat("rtl"===oe?"border-r pr-1 pl-0.5":"border-l pl-1 pr-0.5")}):e(x,{style:{borderColor:null==ne?void 0:ne.searchBoxBorderColor,color:null==ne?void 0:ne.searchBoxBorderColor},className:"size-6 scale-125 opacity-70 ".concat("rtl"===oe?"border-r pr-1 pl-0.5":"border-l pl-1 pr-0.5")}),e("input",{type:"text",value:Fe,placeholder:null==re?void 0:re.searchPlaceholder,className:"w-full border-none bg-transparent !outline-none text-sm placeholder:!text-[10.5pt] max-sm:placeholder:!text-[9pt]",onChange:function(e){He(e.target.value),ye&&ge(I)}})]})})}),!pe&&e(K,{theme:ne,initialPageSize:Ae,pageSize:ke,onPageSizeChange:function(e){je(e),null==ee||ee(e)}})]}),pe?e(b,{columns:Ze,isLoading:!1,rows:"internal"===F||"external"===F?Ce:Ue,pageSize:ze,theme:ne,textsConfig:re}):t(n,{children:[e(S,{rowHeight:"".concat(de,"px")||"51.15px",maxHeight:$||"calc(".concat(Ae*(de||51.15),"px)"),columns:Ze,isLoading:X,rows:"internal"===F||"external"===F?Ce:Ue,pageSize:ze,theme:ne,textsConfig:re,onOrderChange:Ke,onAllSelect:function(){var e;if(null==te?void 0:te.onSelectChange){var t=(null==Ce?void 0:Ce.map(function(e){return e[null==te?void 0:te.selectedKey]}))||[],n=(null===(e=te.selectedIds)||void 0===e?void 0:e.length)===t.length;te.onSelectChange(n?[]:t)}}}),e(D,{dir:oe,startMobileSize:O,totalItems:Pe,queryName:I,pageSize:ze,theme:ne,textsConfig:re,onChangePage:function(e){ve(I,e.toString()),we(e),null==_||_(e)}})]})]})});export{Z as default};
