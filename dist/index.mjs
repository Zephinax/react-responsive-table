import{jsx as e,jsxs as t,Fragment as n}from"react/jsx-runtime";import r,{useState as o,useEffect as i,forwardRef as l,useRef as a,useCallback as c,useMemo as s}from"react";var u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)};function d(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function f(e){void 0===e&&(e=768);var t=o("undefined"!=typeof window&&window.innerWidth<e),n=t[0],r=t[1];return i(function(){function t(){r(window.innerWidth<e)}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}},[e]),n}"function"==typeof SuppressedError&&SuppressedError;var p=function(t){return t.columns,t.isLoading,t.pageSize,t.rows,t.theme,t.textsConfig,e("div",{children:"MobileTable"})},h=function(t){var n=t.className;return e("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",className:n,height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M3 19h18a1.002 1.002 0 0 0 .823-1.569l-9-13c-.373-.539-1.271-.539-1.645 0l-9 13A.999.999 0 0 0 3 19z"})})},g=l(function(n,r){var o=n.label,i=n.checked,l=n.onChange,a=n.name,c=n.className,s=n.value,u=n.disabled,d=void 0!==u&&u,f=n.defaultChecked,p=n.primaryColor;return t("label",{className:"".concat(c," checkbox"),children:[e("input",{className:"checkbox-input",type:"checkbox",name:a,checked:i,onChange:l,ref:r,value:s,disabled:d,defaultChecked:f}),e("span",{style:{backgroundColor:i?p:"transparent",borderColor:i?p:"#b8b8b8"},className:"checkbox-control w-[22px] h-[22px] min-w-[22px] min-h-[22px] rounded-md border transition-all\n    "}),e("span",{className:"checkbox-label",children:o})]})});g.displayName="Checkbox";var m=function(n){var r=n.columns,o=n.isLoading,i=n.maxHeight,l=n.pageSize,c=n.rows,s=n.theme,u=n.textsConfig,d=n.onAllSelect,f=a(null),p=a(null);return e("div",{className:"w-full overflow-hidden rounded-xl",style:{border:"1px solid ".concat(s.borderColor)},children:t("div",{className:"relative",children:[e("div",{ref:f,className:"overflow-x-auto overflow-y-hidden scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:e("table",{className:"w-full table-fixed border-collapse",children:e("thead",{style:{backgroundColor:s.headerBg},children:e("tr",{children:r.map(function(n,r){return e("th",{style:{width:null==n?void 0:n.width,color:s.headerText,borderBottom:"1px solid ".concat(s.rowBorder)},className:"".concat((null==n?void 0:n.orderable)?"cursor-pointer":""," py-2 px-1 text-center min-w-max"),children:"selectableTable"===(null==n?void 0:n.data)?e(g,{className:"mx-auto justify-center",primaryColor:s.primaryColor,onChange:function(){return null==d?void 0:d()}}):t("div",{className:"truncate mx-auto m-auto text-center line-clamp-1 flex items-center justify-center gap-1",title:(null==n?void 0:n.width)?null==n?void 0:n.title:"",children:[(null==n?void 0:n.orderable)&&t("span",{className:"flex flex-col items-center",children:[e(h,{className:"h-2 translate-y-[1px]"}),e(h,{className:"h-2 rotate-180"})]}),null==n?void 0:n.title]})},(null==n?void 0:n.data)||r)})})})})}),e("div",{ref:p,className:"overflow-auto w-full",style:{maxHeight:i},children:e("table",{className:"w-full table-fixed border-collapse",children:e("tbody",{children:o?Array.from({length:l}).map(function(t,n){return e("tr",{children:r.map(function(t,n){return e("td",{children:e("div",{className:"h-9 w-full animate-pulse",style:{backgroundColor:s.rowBg}})},n)})},n)}):(null==c?void 0:c.length)>0?c.map(function(t,n){return e("tr",{style:{borderBottom:"1px solid ".concat(s.rowBorder),backgroundColor:s.rowBg},children:r.map(function(r,o){var i,l=r.data,a=(null==r?void 0:r.render)?null==r?void 0:r.render(l?t[l]:void 0,t,n):l?t[l]:null;return e("td",{style:{width:null==r?void 0:r.width,color:s.cellText},className:"py-1 px-1 text-center",children:e("div",{title:l?null===(i=t[l])||void 0===i?void 0:i.toString():void 0,className:"block truncate mx-auto text-center ".concat(null===l?"flex items-center justify-center gap-1.5":"mx-auto"," overflow-visible h-auto"),children:a})},o)})},n)}):e("tr",{children:e("td",{colSpan:r.length,className:"p-6 text-center",style:{color:s.headerText},children:u.noDataText})})})})})]})})},v=function(e){return function(t,n,r){return e(t,n,r)}},b=function(e){if(null==e||""===e)return"";var t="number"==typeof e?e:parseFloat(e.toString().replace(/,/g,""));return isNaN(t)?"":t.toLocaleString("en-US")},w={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},y=r.createContext&&r.createContext(w),x=["attr","size","title"];function C(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){return e&&e.map((e,t)=>r.createElement(e.tag,k({key:t},e.attr),P(e.child)))}function j(e){return t=>r.createElement(z,N({attr:k({},e.attr)},t),P(e.child))}function z(e){var t=t=>{var n,{attr:o,size:i,title:l}=e,a=C(e,x),c=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",N({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,a,{className:n,style:k(k({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&r.createElement("title",null,l),e.children)};return void 0!==y?r.createElement(y.Consumer,null,e=>t(e)):t(w)}function B(e){return j({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z",opacity:".87"},child:[]},{tag:"path",attr:{d:"M17.51 3.87 15.73 2.1 5.84 12l9.9 9.9 1.77-1.77L9.38 12l8.13-8.13z"},child:[]}]})(e)}function T(e){return j({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"},child:[]}]})(e)}function E(){var e=o(function(){return window.location.search}),t=e[0],n=e[1];return i(function(){var e=function(){n(window.location.search)};return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}},[]),{getParams:c(function(e){return new URLSearchParams(t).get(e)},[t]),updateParams:c(function(e,t){var r=new URLSearchParams(window.location.search);t?r.set(e,t):r.delete(e);var o="".concat(window.location.pathname,"?").concat(r.toString());window.history.pushState({},"",o),n(window.location.search)},[])}}var L=function(r){var l=r.totalItems,a=r.pageSize,d=r.queryName,p=void 0===d?"page":d,h=r.startMobileSize,g=r.theme,m=r.dir,v=r.textsConfig,w=r.onChangePage,y=E(),x=y.updateParams,C=y.getParams,N=Number(C(p))||1,S=Math.ceil(l/a),k=f(h),O=o(N.toString()),P=O[0],j=O[1],z=S.toString().length,L={color:g.paginationTextColor,border:"1px solid ".concat(g.paginationBorderColor),backgroundColor:g.paginationBg||"transparent",padding:"0 8px",borderRadius:"6px",fontSize:"14px",minWidth:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},M={backgroundColor:g.paginationActiveColor,border:"1px solid ".concat(g.paginationActiveColor),color:g.paginationTextColor},A={backgroundColor:g.paginationDisabledBackgroundColor,cursor:"not-allowed",opacity:.6},D=s(function(){var e=N-1,t=N+1;return N<3?(e=2,t=4):N>S-2?(e=S-3,t=S-1):(e=N-1,t=N+1),e<2&&(e=2),t>S-1&&(t=S-1),e>t?[]:Array.from({length:t-e+1},function(t,n){return e+n})},[N,S]),I=D.length>0&&D[0]>2,W=D.length>0&&D[D.length-1]<S-1,R=c(function(e){x(p,e.toString()),null==w||w(e)},[x,p]),H=function(){return N<S&&R(N+1)},K=function(){return N>1&&R(N-1)};i(function(){j(N.toString())},[N]);var U=function(){if(P){var e=parseInt(P,10);(isNaN(e)||e<1)&&(e=1),e>S&&(e=S),e!==N?R(e):j(N.toString())}else j(N.toString())};i(function(){if(P!==N.toString()&&""!==P){var e=setTimeout(function(){U()},2e3);return function(){return clearTimeout(e)}}},[P,N]);return S<=1?null:k?t(n,{children:[e("button",{style:u(u({},L),1===N?A:{}),disabled:1===N,onClick:K,children:e("rtl"===m?T:B,{style:{fontSize:"16px"}})}),e("input",{style:{width:"40px",textAlign:"center",border:"1px solid ".concat(g.paginationBorderColor),borderRadius:"6px"},type:"number",inputMode:"numeric",value:P,onChange:function(e){var t=e.target.value.replace(/\D/g,"");t.length<=z&&j(t)},onKeyDown:function(e){"Enter"===e.key&&U()},onBlur:function(){U()}}),e("span",{style:{color:g.paginationTextColor},children:"/"}),e("span",{children:S}),e("button",{style:u(u({},L),N===S?A:{}),disabled:N===S,onClick:H,children:e("rtl"===m?B:T,{style:{fontSize:"16px"}})})]}):t("div",{className:"w-full flex items-center justify-between gap-2 md:mt-2 flex-wrap-reverse",children:[e("nav",{id:"paging",children:t("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[e("button",{style:u(u({},L),1===N?A:{}),disabled:1===N,onClick:function(){return R(1)},className:"first-paging",children:null==v?void 0:v.firstPaging}),e("button",{style:u(u({},L),1===N?A:{}),disabled:1===N,onClick:K,className:"next-paging",children:e("rtl"===m?T:B,{style:{fontSize:"16px"}})}),e("button",{style:u(u({},L),1===N?M:{}),onClick:function(){return R(1)},className:"paging-button",children:1}),I&&e("span",{style:L,children:"..."}),D.map(function(t){return e("button",{style:u(u({},L),t===N?M:{}),onClick:function(){return R(t)},className:"paging-button",children:b(t)||""},t)}),W&&e("span",{style:L,children:"..."}),e("button",{style:u(u({},L),S===N?M:{}),onClick:function(){return R(S)},className:"paging-button",children:b(S)||""}),e("button",{style:u(u({},L),N===S?A:{}),disabled:N===S,onClick:H,className:"prev-paging",children:e("rtl"===m?B:T,{style:{fontSize:"16px"}})}),e("button",{style:u(u({},L),N===S?A:{}),disabled:N===S,onClick:function(){return R(S)},className:"last-paging",children:null==v?void 0:v.lastPaging})]})}),l>0&&!k&&e("p",{children:null==v?void 0:v.showing((Number(N)-1)*a+1,Math.min(Number(N)*a,l),b(l))})]})},M=function(t){var n=t.row,r=t.selectableProps,o=t.theme,i=r.selectedKey,l=r.selectedIds||[],a=n[i],s=c(function(e){if(r){var t=r.selectedIds,n=r.selectedKey,o=r.onSelectChange,i=null==e?void 0:e[n];if(i){var l=(null==t?void 0:t.includes(i))?t.filter(function(e){return e!==i}):d(d([],t||[],!0),[i],!1);null==o||o(l)}}},[r]);return e(g,{className:"mx-auto justify-center",primaryColor:o.primaryColor,checked:l.includes(a),value:a,onChange:function(){return s(n)}})},A={en:{row:"Row",noDataText:"No data available",firstPaging:"First",lastPaging:"Last",showing:function(e,t,n){return"Showing ".concat(e," to ").concat(t," of ").concat(n," records")}},fa:{row:"ردیف",noDataText:"اطلاعاتی برای نمایش وجود ندارد",firstPaging:"اولین",lastPaging:"آخرین",showing:function(e,t,n){return"نمایش ".concat(e," تا ").concat(t," از ").concat(n," رکورد")}}},D=r.memo(function(r){var l=r.startMobileSize,a=r.columns,c=void 0===a?[]:a,h=r.isSelectable,g=r.colorTheme,b=r.textsConfig,w=r.lang,y=void 0===w?"en":w,x=r.pageQueryName,C=void 0===x?"page":x,N=r.pageSize,S=void 0===N?20:N,k=r.mode,O=h?r:void 0,P=o("static"===k&&r.staticRows||[]),j=P[0];P[1];var z=o("static"===k&&r.totalItems||0),B=z[0];z[1];var T=s(function(){return u({borderColor:"#e7e7e7",headerBg:"#f9f9f9",headerText:"#333333",rowBorder:"#e7e7e7",rowBg:"#fff",cellText:"#333333",primaryColor:"#ffd61f",paginationBg:"#fff",paginationBorderColor:"#d9d9d9",paginationActiveColor:"#ffd61f",paginationTextColor:"#333333",paginationDisabledBackgroundColor:"#f9f9f9"},g)},[g]),D=s(function(){return u(u({},A[y]),b)},[y,b]),I="fa"===y?"rtl":"ltr",W=f(l),R=E(),H=R.updateParams,K=R.getParams,U=o(function(){return Number(K(C))||1}),q=U[0],F=U[1],V=s(function(){var e=(q-1)*S,t=e+S;return j.slice(e,t)},[j,q,S]),Q=s(function(){return d(d(d([],h?[{data:"selectableTable",title:"",render:v(function(t,n){return O?e(M,{row:n,selectableProps:O,theme:T}):null}),orderable:!1,width:30,searchable:!1}]:[],!0),[{data:"id",title:D.row,render:v(function(e,t,n){return n+1}),orderable:!0,width:70,searchable:!1,dontShowTitleInMobile:!0}],!1),c,!0)},[c,h,O,T,D.row]);return i(function(){var e=function(){F(Number(K(C))||1)};return window.addEventListener("popstate",e),function(){return window.removeEventListener("popstate",e)}},[K,C]),e("div",{dir:I,children:W?e(p,{columns:Q,isLoading:!1,rows:V,pageSize:S,theme:T,textsConfig:D}):t(n,{children:[e(m,{columns:Q,isLoading:!1,rows:V,pageSize:S,theme:T,textsConfig:D,onAllSelect:function(){var e;if(null==O?void 0:O.onSelectChange){var t=(null==j?void 0:j.map(function(e){return e[null==O?void 0:O.selectedKey]}))||[],n=(null===(e=O.selectedIds)||void 0===e?void 0:e.length)===t.length;O.onSelectChange(n?[]:t)}}}),e(L,{dir:I,startMobileSize:l,totalItems:B,queryName:C,pageSize:S,theme:T,textsConfig:D,onChangePage:function(e){H(C,e.toString()),F(e)}})]})})});export{D as default};
