import{jsx as e,jsxs as t,Fragment as r}from"react/jsx-runtime";import*as n from"react";import i,{useState as o,useEffect as s,forwardRef as a,useRef as l,useCallback as c,useMemo as u}from"react";import d from"axios";var h=function(){return h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)};function f(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})}function p(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function v(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function m(e){void 0===e&&(e=768);var t=o("undefined"!=typeof window&&window.innerWidth<e),r=t[0],n=t[1];return s(function(){function t(){n(window.innerWidth<e)}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}},[e]),r}"function"==typeof SuppressedError&&SuppressedError;var y=function(t){return t.columns,t.isLoading,t.pageSize,t.rows,t.theme,t.textsConfig,e("div",{children:"MobileTable"})},g=function(t){var r=t.className;return e("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",className:r,height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M3 19h18a1.002 1.002 0 0 0 .823-1.569l-9-13c-.373-.539-1.271-.539-1.645 0l-9 13A.999.999 0 0 0 3 19z"})})},b=function(t){var r=t.onClick,n=t.className,i=t.style;return e("svg",{style:void 0===i?{}:i,onClick:r,className:n,stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",height:"1rem",width:"1rem",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M6.2253 4.81108C5.83477 4.42056 5.20161 4.42056 4.81108 4.81108C4.42056 5.20161 4.42056 5.83477 4.81108 6.2253L10.5858 12L4.81114 17.7747C4.42062 18.1652 4.42062 18.7984 4.81114 19.1889C5.20167 19.5794 5.83483 19.5794 6.22535 19.1889L12 13.4142L17.7747 19.1889C18.1652 19.5794 18.7984 19.5794 19.1889 19.1889C19.5794 18.7984 19.5794 18.1652 19.1889 17.7747L13.4142 12L19.189 6.2253C19.5795 5.83477 19.5795 5.20161 19.189 4.81108C18.7985 4.42056 18.1653 4.42056 17.7748 4.81108L12 10.5858L6.2253 4.81108Z",fill:"currentColor"})})},w=function(t){var r=t.className,n=t.style;return e("svg",{style:void 0===n?{}:n,stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",height:"1rem",width:"1rem",className:r,xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.319 14.4326C20.7628 11.2941 20.542 6.75347 17.6569 3.86829C14.5327 0.744098 9.46734 0.744098 6.34315 3.86829C3.21895 6.99249 3.21895 12.0578 6.34315 15.182C9.22833 18.0672 13.769 18.2879 16.9075 15.8442C16.921 15.8595 16.9351 15.8745 16.9497 15.8891L21.1924 20.1317C21.5829 20.5223 22.2161 20.5223 22.6066 20.1317C22.9971 19.7412 22.9971 19.1081 22.6066 18.7175L18.364 14.4749C18.3493 14.4603 18.3343 14.4462 18.319 14.4326ZM16.2426 5.28251C18.5858 7.62565 18.5858 11.4246 16.2426 13.7678C13.8995 16.1109 10.1005 16.1109 7.75736 13.7678C5.41421 11.4246 5.41421 7.62565 7.75736 5.28251C10.1005 2.93936 13.8995 2.93936 16.2426 5.28251Z",fill:"currentColor"})})},C=a(function(r,n){var i=r.label,o=r.checked,s=r.onChange,a=r.name,l=r.className,c=r.value,u=r.disabled,d=void 0!==u&&u,h=r.defaultChecked,f=r.primaryColor;return t("label",{className:"".concat(l," checkbox"),children:[e("input",{className:"checkbox-input",type:"checkbox",name:a,checked:o,onChange:s,ref:n,value:c,disabled:d,defaultChecked:h}),e("span",{style:{backgroundColor:o?f:"transparent",borderColor:o?f:"#b8b8b8"},className:"checkbox-control w-[22px] h-[22px] min-w-[22px] min-h-[22px] rounded-md border transition-all\n    "}),e("span",{className:"checkbox-label",children:i})]})});C.displayName="Checkbox";var x=function(r){var n=r.columns,i=r.isLoading,s=r.maxHeight,a=r.pageSize,c=r.rows,u=r.theme,d=r.textsConfig,h=r.onAllSelect,f=r.onOrderChange,p=l(null),v=l(null),m=o(null),y=m[0],b=m[1];return e("div",{className:"w-full overflow-hidden rounded-xl",style:{border:"1px solid ".concat(u.borderColor)},children:t("div",{className:"relative",children:[e("div",{ref:p,className:"overflow-x-auto overflow-y-hidden scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:e("table",{className:"w-full table-fixed border-collapse",children:e("thead",{style:{backgroundColor:u.headerBg},children:e("tr",{children:n.map(function(r,n){return e("th",{style:{width:null==r?void 0:r.width,color:u.headerText,borderBottom:"1px solid ".concat(u.rowBorder)},className:"".concat((null==r?void 0:r.orderable)?"cursor-pointer":""," py-2 px-1 text-center min-w-max"),onClick:function(){return(null==r?void 0:r.orderable)&&function(e,t){t.orderable&&t.data&&b(function(r){var n;return n=r&&r.column===e?"desc"===r.dir?{column:e,dir:"asc",name:t.data}:null:{column:e,dir:"desc",name:t.data},null==f||f(n),n})}(n,r)},children:"selectableTable"===(null==r?void 0:r.data)?e(C,{className:"mx-auto justify-center",primaryColor:u.primaryColor,onChange:function(){return null==h?void 0:h()}}):t("div",{className:"truncate mx-auto m-auto text-center line-clamp-1 flex items-center justify-center gap-1",title:(null==r?void 0:r.width)?null==r?void 0:r.title:"",children:[(null==r?void 0:r.orderable)&&t("span",{className:"flex flex-col items-center",children:[e(g,{className:"h-2 translate-y-[1px] ".concat((null==y?void 0:y.column)===n&&"asc"===(null==y?void 0:y.dir)?"opacity-100 text-secondary-900":"opacity-20")}),e(g,{className:"h-2 rotate-180 ".concat((null==y?void 0:y.column)===n&&"desc"===(null==y?void 0:y.dir)?"opacity-100 text-secondary-900":"opacity-20")})]}),null==r?void 0:r.title]})},(null==r?void 0:r.data)||n)})})})})}),e("div",{ref:v,className:"overflow-auto w-full",style:{maxHeight:s},children:e("table",{className:"w-full table-fixed border-collapse",children:e("tbody",{children:i?Array.from({length:a}).map(function(t,r){return e("tr",{children:n.map(function(t,r){return e("td",{children:e("div",{className:"h-9 w-full animate-pulse",style:{backgroundColor:u.rowBg}})},r)})},r)}):(null==c?void 0:c.length)>0?c.map(function(t,r){return e("tr",{style:{borderBottom:"1px solid ".concat(u.rowBorder),backgroundColor:u.rowBg},children:n.map(function(n,i){var o,s=n.data,a=(null==n?void 0:n.render)?null==n?void 0:n.render(s?t[s]:void 0,t,r):s?t[s]:null;return e("td",{style:{width:null==n?void 0:n.width,color:u.cellText},className:"py-1 px-1 text-center",children:e("div",{title:s?null===(o=t[s])||void 0===o?void 0:o.toString():void 0,className:"block truncate mx-auto text-center ".concat(null===s?"flex items-center justify-center gap-1.5":"mx-auto"," overflow-visible h-auto"),children:a})},i)})},r)}):e("tr",{children:e("td",{colSpan:n.length,className:"p-6 text-center",style:{color:u.headerText},children:d.noDataText})})})})})]})})},O=function(e){return function(t,r,n){return e(t,r,n)}},S=function(e){if(null==e||""===e)return"";var t="number"==typeof e?e:parseFloat(e.toString().replace(/,/g,""));return isNaN(t)?"":t.toLocaleString("en-US")},R={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},N=i.createContext&&i.createContext(R),E=["attr","size","title"];function k(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I.apply(this,arguments)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){j(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function j(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e){return e&&e.map((e,t)=>i.createElement(e.tag,P({key:t},e.attr),Q(e.child)))}function L(e){return t=>i.createElement(B,I({attr:P({},e.attr)},t),Q(e.child))}function B(e){var t=t=>{var r,{attr:n,size:o,title:s}=e,a=k(e,E),l=o||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),i.createElement("svg",I({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:r,style:P(P({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&i.createElement("title",null,s),e.children)};return void 0!==N?i.createElement(N.Consumer,null,e=>t(e)):t(R)}function F(e){return L({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z",opacity:".87"},child:[]},{tag:"path",attr:{d:"M17.51 3.87 15.73 2.1 5.84 12l9.9 9.9 1.77-1.77L9.38 12l8.13-8.13z"},child:[]}]})(e)}function A(e){return L({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"},child:[]}]})(e)}function D(){var e=o(function(){return window.location.search}),t=e[0],r=e[1];return s(function(){var e=function(){r(window.location.search)};return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}},[]),{getParams:c(function(e){return new URLSearchParams(t).get(e)},[t]),updateParams:c(function(e,t){var n=new URLSearchParams(window.location.search);n.set(e,t);var i=n.toString(),o=i?"".concat(window.location.pathname,"?").concat(i):window.location.pathname;window.history.pushState({},"",o),r(window.location.search)},[]),removeParams:c(function(e){var t=new URLSearchParams(window.location.search);t.delete(e);var n=t.toString(),i=n?"".concat(window.location.pathname,"?").concat(n):window.location.pathname;window.history.pushState({},"",i),r(window.location.search)},[])}}var z=function(n){var i=n.totalItems,a=n.pageSize,l=n.queryName,d=void 0===l?"page":l,f=n.startMobileSize,p=n.theme,v=n.dir,y=n.textsConfig,g=n.onChangePage,b=D(),w=b.updateParams,C=b.getParams,x=Number(C(d))||1,O=Math.ceil(i/a),R=m(f),N=o(x.toString()),E=N[0],k=N[1],I=O.toString().length,T={color:p.paginationTextColor,border:"1px solid ".concat(p.paginationBorderColor),backgroundColor:p.paginationBg||"transparent",padding:"0 8px",borderRadius:"6px",fontSize:"14px",minWidth:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},P={backgroundColor:p.paginationActiveColor,border:"1px solid ".concat(p.paginationActiveColor),color:p.paginationTextColor},j={backgroundColor:p.paginationDisabledBackgroundColor,cursor:"not-allowed",opacity:.6},Q=u(function(){var e=x-1,t=x+1;return x<3?(e=2,t=4):x>O-2?(e=O-3,t=O-1):(e=x-1,t=x+1),e<2&&(e=2),t>O-1&&(t=O-1),e>t?[]:Array.from({length:t-e+1},function(t,r){return e+r})},[x,O]),L=Q.length>0&&Q[0]>2,B=Q.length>0&&Q[Q.length-1]<O-1,z=c(function(e){w(d,e.toString()),null==g||g(e)},[w,d]),M=function(){return x<O&&z(x+1)},q=function(){return x>1&&z(x-1)};s(function(){k(x.toString())},[x]);var U=function(){if(E){var e=parseInt(E,10);(isNaN(e)||e<1)&&(e=1),e>O&&(e=O),e!==x?z(e):k(x.toString())}else k(x.toString())};s(function(){if(E!==x.toString()&&""!==E){var e=setTimeout(function(){U()},2e3);return function(){return clearTimeout(e)}}},[E,x]);return O<=1?null:R?t(r,{children:[e("button",{style:h(h({},T),1===x?j:{}),disabled:1===x,onClick:q,children:e("rtl"===v?A:F,{style:{fontSize:"16px"}})}),e("input",{style:{width:"40px",textAlign:"center",border:"1px solid ".concat(p.paginationBorderColor),borderRadius:"6px"},type:"number",inputMode:"numeric",value:E,onChange:function(e){var t=e.target.value.replace(/\D/g,"");t.length<=I&&k(t)},onKeyDown:function(e){"Enter"===e.key&&U()},onBlur:function(){U()}}),e("span",{style:{color:p.paginationTextColor},children:"/"}),e("span",{children:O}),e("button",{style:h(h({},T),x===O?j:{}),disabled:x===O,onClick:M,children:e("rtl"===v?F:A,{style:{fontSize:"16px"}})})]}):t("div",{className:"w-full flex items-center justify-between gap-2 md:mt-2 flex-wrap-reverse",children:[e("nav",{id:"paging",children:t("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[e("button",{style:h(h({},T),1===x?j:{}),disabled:1===x,onClick:function(){return z(1)},className:"first-paging",children:null==y?void 0:y.firstPaging}),e("button",{style:h(h({},T),1===x?j:{}),disabled:1===x,onClick:q,className:"next-paging",children:e("rtl"===v?A:F,{style:{fontSize:"16px"}})}),e("button",{style:h(h({},T),1===x?P:{}),onClick:function(){return z(1)},className:"paging-button",children:1}),L&&e("span",{style:T,children:"..."}),Q.map(function(t){return e("button",{style:h(h({},T),t===x?P:{}),onClick:function(){return z(t)},className:"paging-button",children:S(t)||""},t)}),B&&e("span",{style:T,children:"..."}),e("button",{style:h(h({},T),O===x?P:{}),onClick:function(){return z(O)},className:"paging-button",children:S(O)||""}),e("button",{style:h(h({},T),x===O?j:{}),disabled:x===O,onClick:M,className:"prev-paging",children:e("rtl"===v?F:A,{style:{fontSize:"16px"}})}),e("button",{style:h(h({},T),x===O?j:{}),disabled:x===O,onClick:function(){return z(O)},className:"last-paging",children:null==y?void 0:y.lastPaging})]})}),i>0&&!R&&e("p",{children:null==y?void 0:y.showing((Number(x)-1)*a+1,Math.min(Number(x)*a,i),S(i))})]})},M=function(t){var r=t.row,n=t.selectableProps,i=t.theme,o=n.selectedKey,s=n.selectedIds||[],a=r[o],l=c(function(e){if(n){var t=n.selectedIds,r=n.selectedKey,i=n.onSelectChange,o=null==e?void 0:e[r];if(o){var s=(null==t?void 0:t.includes(o))?t.filter(function(e){return e!==o}):v(v([],t||[],!0),[o],!1);null==i||i(s)}}},[n]);return e(C,{className:"mx-auto justify-center",primaryColor:i.primaryColor,checked:s.includes(a),value:a,onChange:function(){return l(r)}})},q=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},U={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},_=new class{#e=U;#t=!1;setTimeoutProvider(e){"production"!==process.env.NODE_ENV&&this.#t&&e!==this.#e&&console.error("[timeoutManager]: Switching provider after calls to previous provider might result in unexpected behavior.",{previous:this.#e,provider:e}),this.#e=e,"production"!==process.env.NODE_ENV&&(this.#t=!1)}setTimeout(e,t){return"production"!==process.env.NODE_ENV&&(this.#t=!0),this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return"production"!==process.env.NODE_ENV&&(this.#t=!0),this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}};var W="undefined"==typeof window||"Deno"in globalThis;function H(){}function V(e){return"number"==typeof e&&e>=0&&e!==1/0}function K(e,t){return"function"==typeof e?e(t):e}function J(e,t){return"function"==typeof e?e(t):e}var Z=Object.prototype.hasOwnProperty;function $(e,t){if(e===t)return e;const r=X(e)&&X(t);if(!(r||Y(e)&&Y(t)))return t;const n=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,s=r?new Array(o):{};let a=0;for(let l=0;l<o;l++){const o=r?l:i[l],c=e[o],u=t[o];if(c===u){s[o]=c,(r?l<n:Z.call(e,o))&&a++;continue}if(null===c||null===u||"object"!=typeof c||"object"!=typeof u){s[o]=u;continue}const d=$(c,u);s[o]=d,d===c&&a++}return n===o&&a===n?e:s}function G(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function X(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Y(e){if(!ee(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!!ee(r)&&(!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function ee(e){return"[object Object]"===Object.prototype.toString.call(e)}function te(e,t,r){if("function"==typeof r.structuralSharing)return r.structuralSharing(e,t);if(!1!==r.structuralSharing){if("production"!==process.env.NODE_ENV)try{return $(e,t)}catch(e){throw console.error(`Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${r.queryHash}]: ${e}`),e}return $(e,t)}return t}var re=new class extends q{#r;#n;#i;constructor(){super(),this.#i=e=>{if(!W&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#n||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(e){this.#i=e,this.#n?.(),this.#n=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#r!==e&&(this.#r=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#r?this.#r:"hidden"!==globalThis.document?.visibilityState}};function ne(){let e,t;const r=new Promise((r,n)=>{e=r,t=n});function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch(()=>{}),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}var ie=function(e){setTimeout(e,0)};var oe=function(){let e=[],t=0,r=e=>{e()},n=e=>{e()},i=ie;const o=n=>{t?e.push(n):i(()=>{r(n)})};return{batch:o=>{let s;t++;try{s=o()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i(()=>{n(()=>{t.forEach(e=>{r(e)})})})})()}return s},batchCalls:e=>(...t)=>{o(()=>{e(...t)})},schedule:o,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{i=e}}}(),se=new class extends q{#o=!0;#n;#i;constructor(){super(),this.#i=e=>{if(!W&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#n||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(e){this.#i=e,this.#n?.(),this.#n=e(this.setOnline.bind(this))}setOnline(e){this.#o!==e&&(this.#o=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#o}};function ae(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(r=t.networkMode,"online"!==(r??"online")||se.isOnline()?"fetching":"paused"),...void 0===e&&{error:null,status:"pending"}};var r}var le=class extends q{constructor(e,t){super(),this.options=t,this.#s=e,this.#a=null,this.#l=ne(),this.bindMethods(),this.setOptions(t)}#s;#c=void 0;#u=void 0;#d=void 0;#h;#f;#l;#a;#p;#v;#m;#y;#g;#b;#w=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#c.addObserver(this),ce(this.#c,this.options)?this.#C():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ue(this.#c,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ue(this.#c,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#O(),this.#S(),this.#c.removeObserver(this)}setOptions(e){const t=this.options,r=this.#c;if(this.options=this.#s.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof J(this.options.enabled,this.#c))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#R(),this.#c.setOptions(this.options),t._defaulted&&!G(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#c,observer:this});const n=this.hasListeners();n&&de(this.#c,r,this.options,t)&&this.#C(),this.updateResult(),!n||this.#c===r&&J(this.options.enabled,this.#c)===J(t.enabled,this.#c)&&K(this.options.staleTime,this.#c)===K(t.staleTime,this.#c)||this.#N();const i=this.#E();!n||this.#c===r&&J(this.options.enabled,this.#c)===J(t.enabled,this.#c)&&i===this.#b||this.#k(i)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),r=this.createResult(t,e);return function(e,t){if(!G(e.getCurrentResult(),t))return!0;return!1}(this,r)&&(this.#d=r,this.#f=this.options,this.#h=this.#c.state),r}getCurrentResult(){return this.#d}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"!==r||this.options.experimental_prefetchInRender||"pending"!==this.#l.status||this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(e,r))})}trackProp(e){this.#w.add(e)}getCurrentQuery(){return this.#c}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),r=this.#s.getQueryCache().build(this.#s,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#C({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#d))}#C(e){this.#R();let t=this.#c.fetch(this.options,e);return e?.throwOnError||(t=t.catch(H)),t}#N(){this.#O();const e=K(this.options.staleTime,this.#c);if(W||this.#d.isStale||!V(e))return;const t=function(e,t){return Math.max(e+(t||0)-Date.now(),0)}(this.#d.dataUpdatedAt,e),r=t+1;this.#y=_.setTimeout(()=>{this.#d.isStale||this.updateResult()},r)}#E(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#c):this.options.refetchInterval)??!1}#k(e){this.#S(),this.#b=e,!W&&!1!==J(this.options.enabled,this.#c)&&V(this.#b)&&0!==this.#b&&(this.#g=_.setInterval(()=>{(this.options.refetchIntervalInBackground||re.isFocused())&&this.#C()},this.#b))}#x(){this.#N(),this.#k(this.#E())}#O(){this.#y&&(_.clearTimeout(this.#y),this.#y=void 0)}#S(){this.#g&&(_.clearInterval(this.#g),this.#g=void 0)}createResult(e,t){const r=this.#c,n=this.options,i=this.#d,o=this.#h,s=this.#f,a=e!==r?e.state:this.#u,{state:l}=e;let c,u={...l},d=!1;if(t._optimisticResults){const i=this.hasListeners(),o=!i&&ce(e,t),s=i&&de(e,r,t,n);(o||s)&&(u={...u,...ae(l.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:h,errorUpdatedAt:f,status:p}=u;c=u.data;let v=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===p){let e;i?.isPlaceholderData&&t.placeholderData===s?.placeholderData?(e=i.data,v=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,void 0!==e&&(p="success",c=te(i?.data,e,t),d=!0)}if(t.select&&void 0!==c&&!v)if(i&&c===o?.data&&t.select===this.#p)c=this.#v;else try{this.#p=t.select,c=t.select(c),c=te(i?.data,c,t),this.#v=c,this.#a=null}catch(e){this.#a=e}this.#a&&(h=this.#a,c=this.#v,f=Date.now(),p="error");const m="fetching"===u.fetchStatus,y="pending"===p,g="error"===p,b=y&&m,w=void 0!==c,C={status:p,fetchStatus:u.fetchStatus,isPending:y,isSuccess:"success"===p,isError:g,isInitialLoading:b,isLoading:b,data:c,dataUpdatedAt:u.dataUpdatedAt,error:h,errorUpdatedAt:f,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>a.dataUpdateCount||u.errorUpdateCount>a.errorUpdateCount,isFetching:m,isRefetching:m&&!y,isLoadingError:g&&!w,isPaused:"paused"===u.fetchStatus,isPlaceholderData:d,isRefetchError:g&&w,isStale:he(e,t),refetch:this.refetch,promise:this.#l,isEnabled:!1!==J(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===C.status?e.reject(C.error):void 0!==C.data&&e.resolve(C.data)},n=()=>{const e=this.#l=C.promise=ne();t(e)},i=this.#l;switch(i.status){case"pending":e.queryHash===r.queryHash&&t(i);break;case"fulfilled":"error"!==C.status&&C.data===i.value||n();break;case"rejected":"error"===C.status&&C.error===i.reason||n()}}return C}updateResult(){const e=this.#d,t=this.createResult(this.#c,this.options);if(this.#h=this.#c.state,this.#f=this.options,void 0!==this.#h.data&&(this.#m=this.#c),G(t,e))return;this.#d=t;this.#I({listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#w.size)return!0;const n=new Set(r??this.#w);return this.options.throwOnError&&n.add("error"),Object.keys(this.#d).some(t=>{const r=t;return this.#d[r]!==e[r]&&n.has(r)})})()})}#R(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#c)return;const t=this.#c;this.#c=e,this.#u=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#I(e){oe.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#d)}),this.#s.getQueryCache().notify({query:this.#c,type:"observerResultsUpdated"})})}};function ce(e,t){return function(e,t){return!1!==J(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&ue(e,t,t.refetchOnMount)}function ue(e,t,r){if(!1!==J(t.enabled,e)&&"static"!==K(t.staleTime,e)){const n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&he(e,t)}return!1}function de(e,t,r,n){return(e!==t||!1===J(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&he(e,r)}function he(e,t){return!1!==J(t.enabled,e)&&e.isStaleByTime(K(t.staleTime,e))}var fe=n.createContext(void 0),pe=n.createContext(!1);pe.Provider;var ve=n.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),me=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function ye(e,t,r){if("production"!==process.env.NODE_ENV&&("object"!=typeof e||Array.isArray(e)))throw new Error('Bad argument type. Starting with v5, only the "Object" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object');const i=n.useContext(pe),o=n.useContext(ve),s=(()=>{const e=n.useContext(fe);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e})(),a=s.defaultQueryOptions(e);s.getDefaultOptions().queries?._experimental_beforeQuery?.(a),"production"!==process.env.NODE_ENV&&(a.queryFn||console.error(`[${a.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`)),a._optimisticResults=i?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,r=e=>"static"===e?e:Math.max(e??t,t),n=e.staleTime;e.staleTime="function"==typeof n?(...e)=>r(n(...e)):r(n),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(a),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(a,o),(e=>{n.useEffect(()=>{e.clearReset()},[e])})(o);const l=!s.getQueryCache().get(a.queryHash),[c]=n.useState(()=>new t(s,a)),u=c.getOptimisticResult(a),d=!i&&!1!==e.subscribed;if(n.useSyncExternalStore(n.useCallback(e=>{const t=d?c.subscribe(oe.batchCalls(e)):H;return c.updateResult(),t},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),n.useEffect(()=>{c.setOptions(a)},[a,c]),((e,t)=>e?.suspense&&t.isPending)(a,u))throw me(a,c,o);if((({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&void 0===e.data||function(e,t){return"function"==typeof e?e(...t):!!e}(r,[e.error,n])))({result:u,errorResetBoundary:o,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if(s.getDefaultOptions().queries?._experimental_afterQuery?.(a,u),a.experimental_prefetchInRender&&!W&&((e,t)=>e.isLoading&&e.isFetching&&!t)(u,i)){const e=l?me(a,c,o):s.getQueryCache().get(a.queryHash)?.promise;e?.catch(H).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}var ge={en:{row:"Row",noDataText:"No data available",firstPaging:"First",lastPaging:"Last",showing:function(e,t,r){return"Showing ".concat(e," to ").concat(t," of ").concat(r," records")},searchPlaceholder:"search ..."},fa:{row:"ردیف",noDataText:"اطلاعاتی برای نمایش وجود ندارد",firstPaging:"اولین",lastPaging:"آخرین",showing:function(e,t,r){return"نمایش ".concat(e," تا ").concat(t," از ").concat(r," رکورد")},searchPlaceholder:"جستجو کنید..."}},be=i.memo(function(n){var i,a,l,g,C,S,R=n.startMobileSize,N=n.columns,E=void 0===N?[]:N,k=n.isSelectable,I=n.colorTheme,T=n.textsConfig,P=n.lang,j=void 0===P?"en":P,Q=n.pageQueryName,L=void 0===Q?"page":Q,B=n.pageSize,F=void 0===B?8:B,A=n.mode,q=n.hasColumnOrder,U=n.noSearch,_=n.saveSearch,W=n.notify,H=k?n:void 0,V=u(function(){return h({borderColor:"#e7e7e7",headerBg:"#f9f9f9",headerText:"#333333",rowBorder:"#e7e7e7",rowBg:"#fff",cellText:"#333333",primaryColor:"#ffd61f",paginationBg:"#fff",paginationBorderColor:"#d9d9d9",paginationActiveColor:"#ffd61f",paginationTextColor:"#333333",paginationDisabledBackgroundColor:"#f9f9f9",searchBoxBorderColor:"#d9d9d9",errorColor:"#f43f5e"},I)},[I]),K=u(function(){return h(h({},ge[j]),T)},[j,T]),J="fa"===j?"rtl":"ltr",Z=m(R),$=D(),G=$.updateParams,X=$.getParams,Y=$.removeParams,ee=o(function(){return Number(X(L))||1}),te=ee[0],re=ee[1],ne=o("static"===A&&n.staticRows||[]),ie=ne[0],oe=ne[1],se=o("static"===A&&n.totalItems||0),ae=se[0],ce=se[1],ue=o([{column:q?8:0,dir:"internal"===A?null===(i=null==n?void 0:n.internalApiConfig)||void 0===i?void 0:i.sortType:"desc",name:"internal"===A?null===(a=null==n?void 0:n.internalApiConfig)||void 0===a?void 0:a.defaultSortBy:"id"}]),de=ue[0],he=ue[1],fe=o(""),pe=fe[0],ve=fe[1],me=o(pe),be=me[0],we=me[1],Ce=c(function(e){he(e?[e]:[])},[]),xe=u(function(){var e=(te-1)*F,t=e+F;return ie.slice(e,t)},[ie,te,F]),Oe=u(function(){return v(v(v([],k?[{data:"selectableTable",title:"",render:O(function(t,r){return H?e(M,{row:r,selectableProps:H,theme:V}):null}),orderable:!1,width:30,searchable:!1}]:[],!0),[{data:"id",title:K.row,render:O(function(e,t,r){return(Number(te)-1)*F+(r+1)}),orderable:!0,width:70,searchable:!1,dontShowTitleInMobile:!0}],!1),E,!0)},[E,k,H,V,K.row,te]);if(s(function(){var e=function(){re(Number(X(L))||1)};return window.addEventListener("popstate",e),function(){return window.removeEventListener("popstate",e)}},[X,L]),s(function(){"static"===A&&(oe(n.staticRows||[]),ce(n.totalItems||0))},[n.staticRows,n.totalItems]),s(function(){var e=setTimeout(function(){we(pe)},400);return function(){return clearTimeout(e)}},[pe]),s(function(){var e;if("internal"===A&&_&&(null===(e=n.internalApiConfig)||void 0===e?void 0:e.tableName)){var t="search_".concat(n.internalApiConfig.tableName),r=sessionStorage.getItem(t);if(r){var i=JSON.parse(r).value;ve(i),we(i)}}},[A,_,n]),s(function(){var e,t;if("internal"===A&&_&&(null===(e=null==n?void 0:n.internalApiConfig)||void 0===e?void 0:e.tableName)){var r="search_".concat(null===(t=null==n?void 0:n.internalApiConfig)||void 0===t?void 0:t.tableName);sessionStorage.setItem(r,JSON.stringify({value:pe}))}},[pe,_,null==n?void 0:n.mode]),"internal"===A){var Se=Array.isArray(null===(l=null==n?void 0:n.internalApiConfig)||void 0===l?void 0:l.customBody)?null===(g=null==n?void 0:n.internalApiConfig)||void 0===g?void 0:g.customBody.filter(function(e){return!e.noRefresh}):[];(S={enabled:Boolean(F&&"internal"===A),queryKey:[null===(C=null==n?void 0:n.internalApiConfig)||void 0===C?void 0:C.tableName,te,be,de,F,Se],refetchOnWindowFocus:!1,refetchIntervalInBackground:!1,queryFn:function(){return f(void 0,void 0,void 0,function(){var e,t,r,i,o,s,a,l,c,u,h,f,v,m,y,g;return p(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),e=(null===(a=null==n?void 0:n.internalApiConfig)||void 0===a?void 0:a.customBody)||[],t=null===(l=null==Oe?void 0:Oe.filter(function(e){return null!==e.data}))||void 0===l?void 0:l.map(function(e){return{data:null==e?void 0:e.data,name:null==e?void 0:e.data,searchable:null==e?void 0:e.searchable,orderable:null==e?void 0:e.orderable,search:{value:"",regex:!1,fixed:[]}}}),r={draw:te,columns:t,order:de||[],start:(te-1)*F,length:F,search:{value:be||"",regex:!1,fixed:[]}},e.forEach(function(e){e.noRefresh,e.isFilter;var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["noRefresh","isFilter"]);Object.assign(r,t)}),i=(null===(c=null==n?void 0:n.internalApiConfig)||void 0===c?void 0:c.endpoint)||"",[4,d({method:(null===(u=null==n?void 0:n.internalApiConfig)||void 0===u?void 0:u.method)||"POST",url:(null===(h=null==n?void 0:n.internalApiConfig)||void 0===h?void 0:h.baseUrl)+i||""+i,data:r||null,headers:{Authorization:"Bearer ".concat(null===(f=null==n?void 0:n.internalApiConfig)||void 0===f?void 0:f.token)}})];case 1:return o=p.sent(),null===(m=null===(v=null==n?void 0:n.internalApiConfig)||void 0===v?void 0:v.onFetch)||void 0===m||m.call(v,null==o?void 0:o.data),oe(null===(y=null==o?void 0:o.data)||void 0===y?void 0:y.data),ce(null===(g=null==o?void 0:o.data)||void 0===g?void 0:g.recordsFiltered),[2,null==o?void 0:o.data];case 2:return s=p.sent(),W(null==s?void 0:s.message,"error"),[3,3];case 3:return[2]}})})}},ye(S,le)).isFetching}return t("div",{dir:J,children:[e("div",{className:"mb-2 flex md:items-start items-center md:gap-2 gap-3 w-fit md:flex-wrap-reverse max-md:w-full",children:!U&&e("div",{className:"max-md:w-full",children:e("div",{className:"flex flex-col gap-1 md:!w-[320px] !w-full [&>div]:!gap-1 [&>div]:!flex-row-reverse",children:t("div",{style:{borderColor:null==V?void 0:V.searchBoxBorderColor},className:"my-0 flex items-center justify-between  gap-3 text-right text-base bg-white rounded-lg placeholder:text-sm !outline-none w-full p-2 border focus:border-primary disabled:opacity-70",children:[pe?e(b,{style:{borderColor:null==V?void 0:V.searchBoxBorderColor,color:pe?null==V?void 0:V.errorColor:null==V?void 0:V.searchBoxBorderColor},onClick:function(){return ve("")},className:"size-6 font-bold scale-125 cursor-pointer ".concat("rtl"===J?"border-r pr-1 pl-0.5":"border-l pl-1 pr-0.5")}):e(w,{style:{borderColor:null==V?void 0:V.searchBoxBorderColor,color:null==V?void 0:V.searchBoxBorderColor},className:"size-6 scale-125 opacity-70 ".concat("rtl"===J?"border-r pr-1 pl-0.5":"border-l pl-1 pr-0.5")}),e("input",{type:"text",value:pe,placeholder:null==K?void 0:K.searchPlaceholder,className:"w-full border-none bg-transparent !outline-none placeholder:!text-[10.5pt] max-sm:placeholder:!text-[9pt]",onChange:function(e){ve(e.target.value),te&&Y(L)}})]})})})}),Z?e(y,{columns:Oe,isLoading:!1,rows:"internal"===A?ie:xe,pageSize:F,theme:V,textsConfig:K}):t(r,{children:[e(x,{columns:Oe,isLoading:!1,rows:"internal"===A?ie:xe,pageSize:F,theme:V,textsConfig:K,onOrderChange:Ce,onAllSelect:function(){var e;if(null==H?void 0:H.onSelectChange){var t=(null==ie?void 0:ie.map(function(e){return e[null==H?void 0:H.selectedKey]}))||[],r=(null===(e=H.selectedIds)||void 0===e?void 0:e.length)===t.length;H.onSelectChange(r?[]:t)}}}),e(z,{dir:J,startMobileSize:R,totalItems:ae,queryName:L,pageSize:F,theme:V,textsConfig:K,onChangePage:function(e){G(L,e.toString()),re(e)}})]})]})});export{be as default};
